<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D'SIDE GRAPHIA</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .navbar {
            background: linear-gradient(135deg, #0062cc, #004085);
            padding: 10px 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .navbar-menu {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        .navbar-menu li {
            margin: 0 20px;
        }

        .navbar-menu a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            padding: 10px 15px;
            display: block;
            transition: background-color 0.3s ease, color 0.3s ease;
            border-radius: 5px;
        }

        .navbar-menu a:hover {
            background-color: #0056b3;
            color: #e2e2e2;
        }

        .navbar-menu a.active {
            background-color: #004085;
            color: #e2e2e2;
        }

        .container {
            padding: 20px;
        }

        .form-container, .table-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 1200px;
        }

        .form-container h2, .table-container h2 {
            margin-top: 0;
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: #0062cc;
            outline: none;
        }

        .form-group button {
            background-color: #0062cc;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .form-group button:hover {
            background-color: #004085;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-container input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
            color: #333;
        }

        td {
            background-color: #fff;
        }

        .status-toggle {
            cursor: pointer;
            color: #0062cc;
            text-decoration: underline;
        }

        .status-toggle:hover {
            color: #004085;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .action-buttons button.edit {
            background-color: #0062cc;
        }

        .action-buttons button.edit:hover {
            background-color: #004085;
        }

        .action-buttons button.delete {
            background-color: #ff6f61;
        }

        .action-buttons button.delete:hover {
            background-color: #cc0000;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-title">D'SIDE GRAPHIA</div>
        <ul class="navbar-menu">
            <li><a href="#aplikasi-kasir" class="active">Aplikasi Kasir</a></li>
            <li><a href="#daftar-barang">Daftar Barang</a></li>
            <li><a href="#riwayat-pembelian">Riwayat Pembelian</a></li>
            <li><a href="#rekap-laporan">Rekap Laporan</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- Form Input Pembelian Customer -->
        <div class="form-container" id="aplikasi-kasir">
            <h2>Form Pembelian Customer</h2>
            <form id="pembelianForm">
                <div class="form-group">
                    <label for="barang">Pilih Barang</label>
                    <select id="barang" name="barang" required>
                        <option value="">-- Pilih Barang --</option>
                        <!-- Option items will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="jumlah-pembelian">Jumlah</label>
                    <input type="number" id="jumlah-pembelian" name="jumlah-pembelian" placeholder="Masukkan Jumlah" required>
                </div>
                <div class="form-group">
                    <label for="total-harga">Total Harga</label>
                    <input type="number" id="total-harga" name="total-harga" placeholder="Total Harga" readonly>
                </div>
                <div class="form-group">
                    <label for="bayar">Jumlah Bayar</label>
                    <input type="number" id="bayar" name="bayar" placeholder="Jumlah Bayar" required>
                </div>
                <div class="form-group">
                    <label for="kembalian">Kembalian</label>
                    <input type="number" id="kembalian" name="kembalian" placeholder="Kembalian" readonly>
                </div>
                <div class="form-group">
                    <button type="submit">Tambah Pembelian</button>
                    <button type="button" id="cetakNota">Cetak Nota</button>
                </div>
            </form>
        </div>

        <!-- Preview Tabel Pembelian Customer -->
        <div class="table-container">
            <h2>
                <div id="transaction-id-container">
                    <span>ID Transaksi: <span id="transaction-id">TRK0001</span></span>
                </div>
            </h2>
            <table id="pembelianTable">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama Barang</th>
                        <th>Harga</th>
                        <th>Qty</th>
                        <th>Jumlah</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data Pembelian akan muncul di sini -->
                </tbody>
            </table>
        </div>

        <!-- Daftar Barang -->
        <div class="form-container" id="daftar-barang">
            <h2>Tambahkan Barang</h2>
            <form id="barangForm">
                <div class="form-group">
                    <label for="nama-barang">Nama Barang</label>
                    <input type="text" id="nama-barang" name="nama-barang" placeholder="Masukkan Nama Barang" required>
                </div>
                <div class="form-group">
                    <label for="harga">Harga</label>
                    <input type="number" id="harga" name="harga" placeholder="Masukkan Harga" required>
                </div>
                <div class="form-group">
                    <label for="jumlah">Jumlah</label>
                    <input type="number" id="jumlah" name="jumlah" placeholder="Masukkan Jumlah" required>
                </div>
                <div class="form-group">
                    <button type="submit">Tambah Barang</button>
                    <button type="button" id="cancelEdit" style="display:none;">Batal Edit</button>
                </div>
            </form>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Cari Barang...">
            </div>
            <div class="table-container">
                <h2>Daftar Barang</h2>
                <table id="barangTable">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>ID Barang</th>
                            <th>Nama Barang</th>
                            <th>Harga</th>
                            <th>Jumlah</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data Barang akan muncul di sini -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Riwayat Pembelian -->
        <div class="table-container" id="riwayat-pembelian">
            <h2>Riwayat Pembelian</h2>
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>ID Transaksi</th>
                        <th>Nama Barang</th>
                        <th>Jumlah</th>
                        <th>Total Harga</th>
                        <th>Tanggal</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data Riwayat Pembelian akan muncul di sini -->
                </tbody>
            </table>
        </div>

        <!-- Rekap Laporan -->
        <div class="table-container" id="rekap-laporan">
            <h2>Rekap Laporan</h2>
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>ID Transaksi</th>
                        <th>Jumlah Item</th>
                        <th>Total Pendapatan</th>
                        <th>Tanggal</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data Rekap Laporan akan muncul di sini -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Data Barang (Contoh)
        const barangList = [
            { id: 'BRG001', nama: 'Barang 1', harga: 10000, jumlah: 50 },
            { id: 'BRG002', nama: 'Barang 2', harga: 20000, jumlah: 30 },
            { id: 'BRG003', nama: 'Barang 3', harga: 15000, jumlah: 20 }
        ];

        // Data Transaksi Pembelian (Contoh)
        const transaksiList = [];

        // Menampilkan Data Barang di Dropdown
        const barangSelect = document.getElementById('barang');
        barangList.forEach(barang => {
            const option = document.createElement('option');
            option.value = barang.id;
            option.textContent = `${barang.nama} - Rp${barang.harga}`;
            barangSelect.appendChild(option);
        });

        // Menampilkan Daftar Barang di Tabel
        const barangTableBody = document.querySelector('#barangTable tbody');
        barangList.forEach((barang, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${barang.id}</td>
                <td>${barang.nama}</td>
                <td>Rp${barang.harga}</td>
                <td>${barang.jumlah}</td>
                <td class="action-buttons">
                    <button class="edit" onclick="editBarang('${barang.id}')">Edit</button>
                    <button class="delete" onclick="deleteBarang('${barang.id}')">Hapus</button>
                </td>
            `;
            barangTableBody.appendChild(row);
        });

        // Fungsi Edit Barang
        function editBarang(id) {
            const barang = barangList.find(b => b.id === id);
            document.getElementById('nama-barang').value = barang.nama;
            document.getElementById('harga').value = barang.harga;
            document.getElementById('jumlah').value = barang.jumlah;
            document.getElementById('barangForm').dataset.editId = id;
            document.getElementById('cancelEdit').style.display = 'inline-block';
        }

        // Fungsi Hapus Barang
        function deleteBarang(id) {
            const confirmDelete = confirm('Apakah Anda yakin ingin menghapus barang ini?');
            if (confirmDelete) {
                // Hapus Barang dari List
                const index = barangList.findIndex(b => b.id === id);
                if (index !== -1) {
                    barangList.splice(index, 1);
                    // Perbarui Tabel
                    barangTableBody.innerHTML = '';
                    barangList.forEach((barang, index) => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${barang.id}</td>
                            <td>${barang.nama}</td>
                            <td>Rp${barang.harga}</td>
                            <td>${barang.jumlah}</td>
                            <td class="action-buttons">
                                <button class="edit" onclick="editBarang('${barang.id}')">Edit</button>
                                <button class="delete" onclick="deleteBarang('${barang.id}')">Hapus</button>
                            </td>
                        `;
                        barangTableBody.appendChild(row);
                    });
                }
            }
        }

        // Fungsi Tambah Barang
        document.getElementById('barangForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const nama = document.getElementById('nama-barang').value;
            const harga = parseFloat(document.getElementById('harga').value);
            const jumlah = parseInt(document.getElementById('jumlah').value, 10);
            const editId = this.dataset.editId;

            if (editId) {
                // Edit Barang
                const barang = barangList.find(b => b.id === editId);
                barang.nama = nama;
                barang.harga = harga;
                barang.jumlah = jumlah;
                // Perbarui Tabel
                barangTableBody.innerHTML = '';
                barangList.forEach((barang, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${barang.id}</td>
                        <td>${barang.nama}</td>
                        <td>Rp${barang.harga}</td>
                        <td>${barang.jumlah}</td>
                        <td class="action-buttons">
                            <button class="edit" onclick="editBarang('${barang.id}')">Edit</button>
                            <button class="delete" onclick="deleteBarang('${barang.id}')">Hapus</button>
                        </td>
                    `;
                    barangTableBody.appendChild(row);
                });
                delete this.dataset.editId;
                document.getElementById('cancelEdit').style.display = 'none';
            } else {
                // Tambah Barang
                const id = `BRG${String(barangList.length + 1).padStart(3, '0')}`;
                barangList.push({ id, nama, harga, jumlah });
                // Perbarui Tabel
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${barangList.length}</td>
                    <td>${id}</td>
                    <td>${nama}</td>
                    <td>Rp${harga}</td>
                    <td>${jumlah}</td>
                    <td class="action-buttons">
                        <button class="edit" onclick="editBarang('${id}')">Edit</button>
                        <button class="delete" onclick="deleteBarang('${id}')">Hapus</button>
                    </td>
                `;
                barangTableBody.appendChild(row);
            }

            this.reset();
        });

        // Fungsi Pencarian
        document.getElementById('searchInput').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            const rows = barangTableBody.getElementsByTagName('tr');

            Array.from(rows).forEach(row => {
                const cells = row.getElementsByTagName('td');
                const match = Array.from(cells).some(cell => cell.textContent.toLowerCase().includes(query));
                row.style.display = match ? '' : 'none';
            });
        });

        // Fungsi Cetak Nota
        document.getElementById('cetakNota').addEventListener('click', function () {
            const printWindow = window.open('', 'Print', 'height=600,width=800');
            printWindow.document.write('<html><head><title>Cetak Nota</title></head><body>');
            printWindow.document.write(document.querySelector('.table-container').innerHTML);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
        });

        // Fungsi Tambah Pembelian
        document.getElementById('pembelianForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const barangId = document.getElementById('barang').value;
            const jumlah = parseInt(document.getElementById('jumlah-pembelian').value, 10);
            const bayar = parseFloat(document.getElementById('bayar').value);
            const barang = barangList.find(b => b.id === barangId);
            const totalHarga = barang.harga * jumlah;
            const kembalian = bayar - totalHarga;

            if (kembalian < 0) {
                alert('Jumlah bayar tidak cukup.');
                return;
            }

            transaksiList.push({
                no: transaksiList.length + 1,
                namaBarang: barang.nama,
                harga: barang.harga,
                qty: jumlah,
                jumlah: totalHarga,
                tanggal: new Date().toLocaleDateString()
            });

            const transaksiTableBody = document.querySelector('#pembelianTable tbody');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${transaksiList.length}</td>
                <td>${barang.nama}</td>
                <td>Rp${barang.harga}</td>
                <td>${jumlah}</td>
                <td>Rp${totalHarga}</td>
                <td class="action-buttons">
                    <button class="edit" onclick="editTransaksi('${barang.nama}')">Edit</button>
                    <button class="delete" onclick="deleteTransaksi('${barang.nama}')">Hapus</button>
                </td>
            `;
            transaksiTableBody.appendChild(row);

            document.getElementById('total-harga').value = '';
            document.getElementById('bayar').value = '';
            document.getElementById('kembalian').value = '';
            document.getElementById('pembelianForm').reset();
        });

        // Fungsi Edit Transaksi
        function editTransaksi(nama) {
            // Implementasi edit transaksi
        }

        // Fungsi Hapus Transaksi
        function deleteTransaksi(nama) {
            const confirmDelete = confirm('Apakah Anda yakin ingin menghapus transaksi ini?');
            if (confirmDelete) {
                // Hapus Transaksi dari List
                const index = transaksiList.findIndex(t => t.namaBarang === nama);
                if (index !== -1) {
                    transaksiList.splice(index, 1);
                    // Perbarui Tabel
                    const transaksiTableBody = document.querySelector('#pembelianTable tbody');
                    transaksiTableBody.innerHTML = '';
                    transaksiList.forEach((transaksi, index) => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${transaksi.namaBarang}</td>
                            <td>Rp${transaksi.harga}</td>
                            <td>${transaksi.qty}</td>
                            <td>Rp${transaksi.jumlah}</td>
                            <td class="action-buttons">
                                <button class="edit" onclick="editTransaksi('${transaksi.namaBarang}')">Edit</button>
                                <button class="delete" onclick="deleteTransaksi('${transaksi.namaBarang}')">Hapus</button>
                            </td>
                        `;
                        transaksiTableBody.appendChild(row);
                    });
                }
            }
        }

        // Update ID Transaksi
        const transactionIdElement = document.getElementById('transaction-id');
        function updateTransactionId() {
            const latestId = `TRK${String(transaksiList.length + 1).padStart(4, '0')}`;
            transactionIdElement.textContent = latestId;
        }
    </script>
</body>
</html>
